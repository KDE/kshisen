# This is a sample Makefile.in 

# @CXXFLAGS@     : is set to -g -Wall (when debuging) or -O2 -Wall (when not)
# @all_includes@ : is set to all needed include paths for QT, KDE and X11
# -I.. 	         : needed for config.h
CXXFLAGS= @CXXFLAGS@ @all_includes@ -DHAVE_CONFIG_H -I..

top_builddir = ..
KDE_RPATH = @KDE_RPATH@
LIBTOOL = @LIBTOOL@
kde_libraries = @kde_libraries@
qt_libraries = @qt_libraries@
exec_prefix = @exec_prefix@
install_root    = @install_root@
kde_datadir     = @kde_datadir@
kde_appsdir     = @kde_appsdir@
kde_bindir      = @kde_bindir@
kde_minidir     = @kde_minidir@
kde_icondir     = @kde_icondir@
kde_confdir     = @kde_confdir@
kde_htmldir     = @kde_htmldir@

# @LDFLAGS@    : is set to -s (when not debuging) for stripping
# @all_libra.@ : is set to all needed libraries paths for QT, KDE and X11
# you need also @LIBSOCKET@, if you link with -lkfm
LDFLAGS	= @LDFLAGS@ @all_libraries@ -lkdecore -lqt -lXext -lX11 -lkdeui

# both are clear, I think
CXX     = @CXX@
MOC   	= @MOC@

############# INSTALL #################

install = @INSTALL@
INSTALL = $(install) -m 0755
INSTALL_DATA = $(install) -m 0644
INSTALL_DIR = $(install) -d -m 0755
INSTALL_DIR_PRIVATE = $(install) -d -m 0700

prefix = @prefix@
BINDIR = $(kde_bindir)
KDELNKDIR= $(kde_appsdir)/Games
PICDIR = $(kde_datadir)/kshisen/pics
DOCDIR = $(kde_htmldir)/en/kshisen

########### File Formats ###########

.SUFFIXES: .cpp .moc

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $<

.h.moc: 
	$(MOC) $< -o $@

########## Files #####################

OBJECTS	= main.o board.o app.o
SRCMETA	= board.moc app.moc
PICS=kshisen.xpm kshisen_bgnd.xpm
TARGET = kshisen

######### build rules ################

all: Makefile $(TARGET)

Makefile: Makefile.in
	cd .. && CONFIG_FILES=kshisen/$@ CONFIG_HEADERS= $(SHELL) ./config.status

$(TARGET): $(SRCMETA) $(OBJECTS)
	$(LIBTOOL) --mode=link $(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS) $(KDE_RPATH)

clean:
	rm -f *.o *.bak *~ *% #*
	rm -f $(SRCMETA) $(TARGET)

distclean: clean
	rm -f Makefile

install: all
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	$(INSTALL_DIR) $(KDELNKDIR)
	$(INSTALL_DATA) kshisen.kdelnk $(KDELNKDIR)
	$(INSTALL_DIR) $(PICDIR)
	@for i in $(PICS); do \
	echo $(INSTALL_DATA) pics/$$i $(PICDIR); \
	$(INSTALL_DATA) pics/$$i $(PICDIR)/$$i; \
	done
	$(INSTALL_DIR) $(DOCDIR)
	$(INSTALL_DATA) html/index.html html/index-1.html html/index-2.html \
				html/logotp3.gif $(DOCDIR)


uninstall:
	rm -f $(BINDIR)/$(TARGET)

messages:
	@XGETTEXT@ -C -ktranslate -x ../../kdelibs/po/kde.pot *.cpp && mv messages.po ../po/kshisen.pot


# DO NOT DELETE THIS LINE -- make depend depends on it.
